   1              		.cpu cortex-m0
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 34, 0
  11              		.eabi_attribute 18, 4
  12              		.code	16
  13              		.file	"LineScanCamera.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.comm	straight_speed,4,4
  18              		.comm	medium_speed,4,4
  19              		.comm	turn_speed,4,4
  20              		.comm	brake_speed,4,4
  21              		.comm	speedC,4,4
  22              		.comm	LineScanData,200,4
  23              		.comm	histogram,4096,4
  24              		.comm	kp,8,8
  25              		.comm	ki,8,8
  26              		.comm	kd,8,8
  27              		.comm	lastError,8,8
  28              		.comm	llastError,8,8
  29              		.comm	lastOutput,4,4
  30              		.comm	AccData,6,4
  31              		.comm	Xout,2,2
  32              		.comm	Yout,2,2
  33              		.comm	Zout,2,2
  34              		.comm	Xoffset,1,1
  35              		.comm	Yoffset,1,1
  36              		.comm	Zoffset,1,1
  37              		.comm	ramp,4,4
  38              		.comm	LineScanImageWorkingBuffer,4,4
  39              		.comm	LineScanImage,4,4
  40              		.comm	LineScanImageBuffer,512,4
  41              		.comm	LineScanWorkingBuffer,1,1
  42              		.global	LineScanImageReady
  43              		.section	.bss.LineScanImageReady,"aw",%nobits
  46              	LineScanImageReady:
  47 0000 00       		.space	1
  48              		.section	.text.InitLineScanCamera,"ax",%progbits
  49              		.align	2
  50              		.global	InitLineScanCamera
  51              		.code	16
  52              		.thumb_func
  54              	InitLineScanCamera:
  55              	.LFB0:
  56              		.file 1 "../Sources/LineScanCamera.c"
   1:../Sources/LineScanCamera.c **** #include "Config.h"
   2:../Sources/LineScanCamera.c **** 
   3:../Sources/LineScanCamera.c **** volatile uint16_t *LineScanImageWorkingBuffer;
   4:../Sources/LineScanCamera.c **** volatile uint16_t *LineScanImage;
   5:../Sources/LineScanCamera.c **** volatile uint16_t LineScanImageBuffer[2][128];
   6:../Sources/LineScanCamera.c **** volatile uint8_t LineScanWorkingBuffer;
   7:../Sources/LineScanCamera.c **** 
   8:../Sources/LineScanCamera.c **** volatile uint8_t LineScanImageReady = 0;
   9:../Sources/LineScanCamera.c **** 
  10:../Sources/LineScanCamera.c **** /*
  11:../Sources/LineScanCamera.c ****  * File: LineScanCamera.c
  12:../Sources/LineScanCamera.c ****  * Freescale Cup 2014
  13:../Sources/LineScanCamera.c ****  * Team: Freesnail
  14:../Sources/LineScanCamera.c ****  * Author: Ben Kraines 	<bjk6868@rit.edu>
  15:../Sources/LineScanCamera.c ****  * 		   Brent Dimmig <bnd8678@rit.edu>
  16:../Sources/LineScanCamera.c ****  * 
  17:../Sources/LineScanCamera.c ****  * Description: Line scan camera interface and setup
  18:../Sources/LineScanCamera.c ****  */
  19:../Sources/LineScanCamera.c **** 
  20:../Sources/LineScanCamera.c **** /*
  21:../Sources/LineScanCamera.c ****  * Initialize the camera to perform line scan operations.
  22:../Sources/LineScanCamera.c ****  */
  23:../Sources/LineScanCamera.c **** void InitLineScanCamera()
  24:../Sources/LineScanCamera.c **** {
  57              		.loc 1 24 0
  58              		.cfi_startproc
  59 0000 80B5     		push	{r7, lr}
  60              	.LCFI0:
  61              		.cfi_def_cfa_offset 8
  62              		.cfi_offset 7, -8
  63              		.cfi_offset 14, -4
  64 0002 00AF     		add	r7, sp, #0
  65              	.LCFI1:
  66              		.cfi_def_cfa_register 7
  25:../Sources/LineScanCamera.c **** 	SIM_SCGC5 |= SIM_SCGC5_PORTE_MASK | SIM_SCGC5_PORTD_MASK; //Make sure the clock is enabled for POR
  67              		.loc 1 25 0
  68 0004 194A     		ldr	r2, .L2
  69 0006 1949     		ldr	r1, .L2
  70 0008 194B     		ldr	r3, .L2+4
  71 000a CB58     		ldr	r3, [r1, r3]
  72 000c C021     		mov	r1, #192
  73 000e 8901     		lsl	r1, r1, #6
  74 0010 1943     		orr	r1, r3
  75 0012 174B     		ldr	r3, .L2+4
  76 0014 D150     		str	r1, [r2, r3]
  26:../Sources/LineScanCamera.c **** 	PORTE_PCR1 = PORT_PCR_MUX(1) | PORT_PCR_DSE_MASK; //Enable GPIO on on the pin for the CLOCK Signal
  77              		.loc 1 26 0
  78 0016 174B     		ldr	r3, .L2+8
  79 0018 A022     		mov	r2, #160
  80 001a 5200     		lsl	r2, r2, #1
  81 001c 5A60     		str	r2, [r3, #4]
  27:../Sources/LineScanCamera.c **** 	PORTD_PCR7 = PORT_PCR_MUX(1) | PORT_PCR_DSE_MASK; //Enable GPIO on on the pin for SI signal
  82              		.loc 1 27 0
  83 001e 164B     		ldr	r3, .L2+12
  84 0020 A022     		mov	r2, #160
  85 0022 5200     		lsl	r2, r2, #1
  86 0024 DA61     		str	r2, [r3, #28]
  28:../Sources/LineScanCamera.c **** 
  29:../Sources/LineScanCamera.c **** 	PORTD_PCR5 = PORT_PCR_MUX(0); //Make sure AO signal goes to an analog input
  87              		.loc 1 29 0
  88 0026 144B     		ldr	r3, .L2+12
  89 0028 0022     		mov	r2, #0
  90 002a 5A61     		str	r2, [r3, #20]
  30:../Sources/LineScanCamera.c **** 	PORTD_PCR6 = PORT_PCR_MUX(0); //Make sure AO signal goes to an analog input
  91              		.loc 1 30 0
  92 002c 124B     		ldr	r3, .L2+12
  93 002e 0022     		mov	r2, #0
  94 0030 9A61     		str	r2, [r3, #24]
  31:../Sources/LineScanCamera.c **** 
  32:../Sources/LineScanCamera.c **** 	//Make sure the Clock and SI pins are outputs
  33:../Sources/LineScanCamera.c **** 	GPIOD_PDDR |= (1 << 7);
  95              		.loc 1 33 0
  96 0032 124B     		ldr	r3, .L2+16
  97 0034 114A     		ldr	r2, .L2+16
  98 0036 5269     		ldr	r2, [r2, #20]
  99 0038 8021     		mov	r1, #128
 100 003a 0A43     		orr	r2, r1
 101 003c 5A61     		str	r2, [r3, #20]
  34:../Sources/LineScanCamera.c **** 	GPIOE_PDDR |= (1 << 1);
 102              		.loc 1 34 0
 103 003e 104B     		ldr	r3, .L2+20
 104 0040 0F4A     		ldr	r2, .L2+20
 105 0042 5269     		ldr	r2, [r2, #20]
 106 0044 0221     		mov	r1, #2
 107 0046 0A43     		orr	r2, r1
 108 0048 5A61     		str	r2, [r3, #20]
  35:../Sources/LineScanCamera.c **** 
  36:../Sources/LineScanCamera.c **** 	TAOS_CLK_LOW;
 109              		.loc 1 36 0
 110 004a 0D4B     		ldr	r3, .L2+20
 111 004c 0222     		mov	r2, #2
 112 004e 9A60     		str	r2, [r3, #8]
  37:../Sources/LineScanCamera.c **** 	TAOS_SI_LOW;
 113              		.loc 1 37 0
 114 0050 0A4B     		ldr	r3, .L2+16
 115 0052 8022     		mov	r2, #128
 116 0054 9A60     		str	r2, [r3, #8]
  38:../Sources/LineScanCamera.c **** 
  39:../Sources/LineScanCamera.c **** 	LineScanWorkingBuffer = 0;
 117              		.loc 1 39 0
 118 0056 0B4B     		ldr	r3, .L2+24
 119 0058 0022     		mov	r2, #0
 120 005a 1A70     		strb	r2, [r3]
  40:../Sources/LineScanCamera.c **** 
  41:../Sources/LineScanCamera.c **** 	LineScanImageWorkingBuffer = &LineScanImageBuffer[0][0];
 121              		.loc 1 41 0
 122 005c 0A4B     		ldr	r3, .L2+28
 123 005e 0B4A     		ldr	r2, .L2+32
 124 0060 1A60     		str	r2, [r3]
  42:../Sources/LineScanCamera.c **** 
  43:../Sources/LineScanCamera.c **** 	LineScanImage = &LineScanImageBuffer[1][0];
 125              		.loc 1 43 0
 126 0062 0B4B     		ldr	r3, .L2+36
 127 0064 0B4A     		ldr	r2, .L2+40
 128 0066 1A60     		str	r2, [r3]
  44:../Sources/LineScanCamera.c **** }
 129              		.loc 1 44 0
 130 0068 BD46     		mov	sp, r7
 131              		@ sp needed for prologue
 132 006a 80BD     		pop	{r7, pc}
 133              	.L3:
 134              		.align	2
 135              	.L2:
 136 006c 00700440 		.word	1074032640
 137 0070 38100000 		.word	4152
 138 0074 00D00440 		.word	1074057216
 139 0078 00C00440 		.word	1074053120
 140 007c C0F00F40 		.word	1074786496
 141 0080 00F10F40 		.word	1074786560
 142 0084 00000000 		.word	LineScanWorkingBuffer
 143 0088 00000000 		.word	LineScanImageWorkingBuffer
 144 008c 00000000 		.word	LineScanImageBuffer
 145 0090 00000000 		.word	LineScanImage
 146 0094 00010000 		.word	LineScanImageBuffer+256
 147              		.cfi_endproc
 148              	.LFE0:
 150              		.global	__aeabi_ui2d
 151              		.global	__aeabi_ddiv
 152              		.global	__aeabi_dmul
 153              		.global	__aeabi_d2f
 154              		.global	__aeabi_f2uiz
 155              		.section	.text.SetLineScanExposureTime,"ax",%progbits
 156              		.align	2
 157              		.global	SetLineScanExposureTime
 158              		.code	16
 159              		.thumb_func
 161              	SetLineScanExposureTime:
 162              	.LFB1:
  45:../Sources/LineScanCamera.c **** 
  46:../Sources/LineScanCamera.c **** //change the frequency of data updates from the camera
  47:../Sources/LineScanCamera.c **** void SetLineScanExposureTime(uint32_t TimeIn_uS)
  48:../Sources/LineScanCamera.c **** {
 163              		.loc 1 48 0
 164              		.cfi_startproc
 165 0000 90B5     		push	{r4, r7, lr}
 166              	.LCFI2:
 167              		.cfi_def_cfa_offset 12
 168              		.cfi_offset 4, -12
 169              		.cfi_offset 7, -8
 170              		.cfi_offset 14, -4
 171 0002 85B0     		sub	sp, sp, #20
 172              	.LCFI3:
 173              		.cfi_def_cfa_offset 32
 174 0004 00AF     		add	r7, sp, #0
 175              	.LCFI4:
 176              		.cfi_def_cfa_register 7
 177 0006 7860     		str	r0, [r7, #4]
  49:../Sources/LineScanCamera.c **** 	float t;
  50:../Sources/LineScanCamera.c **** 	//Figure out how many Pit ticks we need for for the exposure time
  51:../Sources/LineScanCamera.c **** 	t = (TimeIn_uS / 1000000.0) * (float) (PERIPHERAL_BUS_CLOCK);
 178              		.loc 1 51 0
 179 0008 7868     		ldr	r0, [r7, #4]
 180 000a FFF7FEFF 		bl	__aeabi_ui2d
 181 000e 031C     		mov	r3, r0
 182 0010 0C1C     		mov	r4, r1
 183 0012 181C     		mov	r0, r3
 184 0014 211C     		mov	r1, r4
 185 0016 114B     		ldr	r3, .L5+4
 186 0018 0F4A     		ldr	r2, .L5
 187 001a FFF7FEFF 		bl	__aeabi_ddiv
 188 001e 031C     		mov	r3, r0
 189 0020 0C1C     		mov	r4, r1
 190 0022 181C     		mov	r0, r3
 191 0024 211C     		mov	r1, r4
 192 0026 0E4A     		ldr	r2, .L5+8
 193 0028 0E4B     		ldr	r3, .L5+12
 194 002a FFF7FEFF 		bl	__aeabi_dmul
 195 002e 031C     		mov	r3, r0
 196 0030 0C1C     		mov	r4, r1
 197 0032 181C     		mov	r0, r3
 198 0034 211C     		mov	r1, r4
 199 0036 FFF7FEFF 		bl	__aeabi_d2f
 200 003a 031C     		add	r3, r0, #0
 201 003c FB60     		str	r3, [r7, #12]
  52:../Sources/LineScanCamera.c **** 	PIT_LDVAL0 = (uint32_t)t;
 202              		.loc 1 52 0
 203 003e 0A4C     		ldr	r4, .L5+16
 204 0040 F868     		ldr	r0, [r7, #12]
 205 0042 FFF7FEFF 		bl	__aeabi_f2uiz
 206 0046 021C     		mov	r2, r0
 207 0048 8023     		mov	r3, #128
 208 004a 5B00     		lsl	r3, r3, #1
 209 004c E250     		str	r2, [r4, r3]
  53:../Sources/LineScanCamera.c **** }
 210              		.loc 1 53 0
 211 004e BD46     		mov	sp, r7
 212 0050 05B0     		add	sp, sp, #20
 213              		@ sp needed for prologue
 214 0052 90BD     		pop	{r4, r7, pc}
 215              	.L6:
 216 0054 C046C046 		.align	3
 217              	.L5:
 218 0058 00000000 		.word	0
 219 005c 80842E41 		.word	1093567616
 220 0060 00000000 		.word	0
 221 0064 60E37641 		.word	1098310496
 222 0068 00700340 		.word	1073967104
 223              		.cfi_endproc
 224              	.LFE1:
 226 006c C046C046 		.section	.text.medianFilter,"ax",%progbits
 227              		.align	2
 228              		.global	medianFilter
 229              		.code	16
 230              		.thumb_func
 232              	medianFilter:
 233              	.LFB2:
  54:../Sources/LineScanCamera.c **** 
  55:../Sources/LineScanCamera.c **** /* 1D n=3 median filter on LineScanData */
  56:../Sources/LineScanCamera.c **** void medianFilter()
  57:../Sources/LineScanCamera.c **** {
 234              		.loc 1 57 0
 235              		.cfi_startproc
 236 0000 80B5     		push	{r7, lr}
 237              	.LCFI5:
 238              		.cfi_def_cfa_offset 8
 239              		.cfi_offset 7, -8
 240              		.cfi_offset 14, -4
 241 0002 88B0     		sub	sp, sp, #32
 242              	.LCFI6:
 243              		.cfi_def_cfa_offset 40
 244 0004 00AF     		add	r7, sp, #0
 245              	.LCFI7:
 246              		.cfi_def_cfa_register 7
  58:../Sources/LineScanCamera.c **** 	int i;
  59:../Sources/LineScanCamera.c **** 
  60:../Sources/LineScanCamera.c **** 	//Endpoints
  61:../Sources/LineScanCamera.c **** 	if(LineScanData[0]<LineScanData[1])
 247              		.loc 1 61 0
 248 0006 2C4B     		ldr	r3, .L17
 249 0008 1A88     		ldrh	r2, [r3]
 250 000a 2B4B     		ldr	r3, .L17
 251 000c 5B88     		ldrh	r3, [r3, #2]
 252 000e 9A42     		cmp	r2, r3
 253 0010 03D2     		bcs	.L8
  62:../Sources/LineScanCamera.c **** 		LineScanData[0] = LineScanData[1];
 254              		.loc 1 62 0
 255 0012 294B     		ldr	r3, .L17
 256 0014 5A88     		ldrh	r2, [r3, #2]
 257 0016 284B     		ldr	r3, .L17
 258 0018 1A80     		strh	r2, [r3]
 259              	.L8:
  63:../Sources/LineScanCamera.c **** 
  64:../Sources/LineScanCamera.c **** 	if(LineScanData[99]<LineScanData[98])
 260              		.loc 1 64 0
 261 001a 274A     		ldr	r2, .L17
 262 001c C623     		mov	r3, #198
 263 001e D25A     		ldrh	r2, [r2, r3]
 264 0020 2549     		ldr	r1, .L17
 265 0022 C423     		mov	r3, #196
 266 0024 CB5A     		ldrh	r3, [r1, r3]
 267 0026 9A42     		cmp	r2, r3
 268 0028 05D2     		bcs	.L9
  65:../Sources/LineScanCamera.c **** 		LineScanData[99] = LineScanData[98];
 269              		.loc 1 65 0
 270 002a 234A     		ldr	r2, .L17
 271 002c C423     		mov	r3, #196
 272 002e D15A     		ldrh	r1, [r2, r3]
 273 0030 214A     		ldr	r2, .L17
 274 0032 C623     		mov	r3, #198
 275 0034 D152     		strh	r1, [r2, r3]
 276              	.L9:
  66:../Sources/LineScanCamera.c **** 	
  67:../Sources/LineScanCamera.c **** 	for(i=1; i<99; i++)
 277              		.loc 1 67 0
 278 0036 0123     		mov	r3, #1
 279 0038 FB61     		str	r3, [r7, #28]
 280 003a 36E0     		b	.L10
 281              	.L16:
 282              	.LBB2:
  68:../Sources/LineScanCamera.c **** 	{
  69:../Sources/LineScanCamera.c **** 		int a,b,c,med,min,max;
  70:../Sources/LineScanCamera.c **** 		a = LineScanData[i-1];
 283              		.loc 1 70 0
 284 003c FB69     		ldr	r3, [r7, #28]
 285 003e 5A1E     		sub	r2, r3, #1
 286 0040 1D4B     		ldr	r3, .L17
 287 0042 5200     		lsl	r2, r2, #1
 288 0044 D35A     		ldrh	r3, [r2, r3]
 289 0046 FB60     		str	r3, [r7, #12]
  71:../Sources/LineScanCamera.c **** 		b = LineScanData[i];
 290              		.loc 1 71 0
 291 0048 1B4B     		ldr	r3, .L17
 292 004a FA69     		ldr	r2, [r7, #28]
 293 004c 5200     		lsl	r2, r2, #1
 294 004e D35A     		ldrh	r3, [r2, r3]
 295 0050 BB60     		str	r3, [r7, #8]
  72:../Sources/LineScanCamera.c **** 		c = LineScanData[i+1];
 296              		.loc 1 72 0
 297 0052 FB69     		ldr	r3, [r7, #28]
 298 0054 5A1C     		add	r2, r3, #1
 299 0056 184B     		ldr	r3, .L17
 300 0058 5200     		lsl	r2, r2, #1
 301 005a D35A     		ldrh	r3, [r2, r3]
 302 005c 7B60     		str	r3, [r7, #4]
  73:../Sources/LineScanCamera.c **** 		
  74:../Sources/LineScanCamera.c **** 		if(a > b)
 303              		.loc 1 74 0
 304 005e FA68     		ldr	r2, [r7, #12]
 305 0060 BB68     		ldr	r3, [r7, #8]
 306 0062 9A42     		cmp	r2, r3
 307 0064 04DD     		ble	.L11
  75:../Sources/LineScanCamera.c **** 		{
  76:../Sources/LineScanCamera.c **** 			max = a;
 308              		.loc 1 76 0
 309 0066 FB68     		ldr	r3, [r7, #12]
 310 0068 3B61     		str	r3, [r7, #16]
  77:../Sources/LineScanCamera.c **** 			min = b;
 311              		.loc 1 77 0
 312 006a BB68     		ldr	r3, [r7, #8]
 313 006c 7B61     		str	r3, [r7, #20]
 314 006e 03E0     		b	.L12
 315              	.L11:
  78:../Sources/LineScanCamera.c **** 		}
  79:../Sources/LineScanCamera.c **** 		else
  80:../Sources/LineScanCamera.c **** 		{
  81:../Sources/LineScanCamera.c **** 			max = b;
 316              		.loc 1 81 0
 317 0070 BB68     		ldr	r3, [r7, #8]
 318 0072 3B61     		str	r3, [r7, #16]
  82:../Sources/LineScanCamera.c **** 			min = a;
 319              		.loc 1 82 0
 320 0074 FB68     		ldr	r3, [r7, #12]
 321 0076 7B61     		str	r3, [r7, #20]
 322              	.L12:
  83:../Sources/LineScanCamera.c **** 		}
  84:../Sources/LineScanCamera.c **** 		if(c > max)
 323              		.loc 1 84 0
 324 0078 7A68     		ldr	r2, [r7, #4]
 325 007a 3B69     		ldr	r3, [r7, #16]
 326 007c 9A42     		cmp	r2, r3
 327 007e 02DD     		ble	.L13
  85:../Sources/LineScanCamera.c **** 			med = max;
 328              		.loc 1 85 0
 329 0080 3B69     		ldr	r3, [r7, #16]
 330 0082 BB61     		str	r3, [r7, #24]
 331 0084 08E0     		b	.L14
 332              	.L13:
  86:../Sources/LineScanCamera.c **** 		else
  87:../Sources/LineScanCamera.c **** 			if(c < min)
 333              		.loc 1 87 0
 334 0086 7A68     		ldr	r2, [r7, #4]
 335 0088 7B69     		ldr	r3, [r7, #20]
 336 008a 9A42     		cmp	r2, r3
 337 008c 02DA     		bge	.L15
  88:../Sources/LineScanCamera.c **** 				med = min;
 338              		.loc 1 88 0
 339 008e 7B69     		ldr	r3, [r7, #20]
 340 0090 BB61     		str	r3, [r7, #24]
 341 0092 01E0     		b	.L14
 342              	.L15:
  89:../Sources/LineScanCamera.c **** 			else
  90:../Sources/LineScanCamera.c **** 				med = c;
 343              		.loc 1 90 0
 344 0094 7B68     		ldr	r3, [r7, #4]
 345 0096 BB61     		str	r3, [r7, #24]
 346              	.L14:
  91:../Sources/LineScanCamera.c **** 		LineScanData[i] = med;
 347              		.loc 1 91 0
 348 0098 BB69     		ldr	r3, [r7, #24]
 349 009a 99B2     		uxth	r1, r3
 350 009c 064B     		ldr	r3, .L17
 351 009e FA69     		ldr	r2, [r7, #28]
 352 00a0 5200     		lsl	r2, r2, #1
 353 00a2 D152     		strh	r1, [r2, r3]
 354              	.LBE2:
  67:../Sources/LineScanCamera.c **** 	for(i=1; i<99; i++)
 355              		.loc 1 67 0
 356 00a4 FB69     		ldr	r3, [r7, #28]
 357 00a6 0133     		add	r3, r3, #1
 358 00a8 FB61     		str	r3, [r7, #28]
 359              	.L10:
  67:../Sources/LineScanCamera.c **** 	for(i=1; i<99; i++)
 360              		.loc 1 67 0 is_stmt 0
 361 00aa FB69     		ldr	r3, [r7, #28]
 362 00ac 622B     		cmp	r3, #98
 363 00ae C5DD     		ble	.L16
  92:../Sources/LineScanCamera.c **** 	}
  93:../Sources/LineScanCamera.c **** }
 364              		.loc 1 93 0 is_stmt 1
 365 00b0 BD46     		mov	sp, r7
 366 00b2 08B0     		add	sp, sp, #32
 367              		@ sp needed for prologue
 368 00b4 80BD     		pop	{r7, pc}
 369              	.L18:
 370 00b6 C046     		.align	2
 371              	.L17:
 372 00b8 00000000 		.word	LineScanData
 373              		.cfi_endproc
 374              	.LFE2:
 376              		.section	.text.maxValue,"ax",%progbits
 377              		.align	2
 378              		.global	maxValue
 379              		.code	16
 380              		.thumb_func
 382              	maxValue:
 383              	.LFB3:
  94:../Sources/LineScanCamera.c **** 
  95:../Sources/LineScanCamera.c **** /* Maximum value of data set */
  96:../Sources/LineScanCamera.c **** int maxValue()
  97:../Sources/LineScanCamera.c **** {
 384              		.loc 1 97 0
 385              		.cfi_startproc
 386 0000 80B5     		push	{r7, lr}
 387              	.LCFI8:
 388              		.cfi_def_cfa_offset 8
 389              		.cfi_offset 7, -8
 390              		.cfi_offset 14, -4
 391 0002 82B0     		sub	sp, sp, #8
 392              	.LCFI9:
 393              		.cfi_def_cfa_offset 16
 394 0004 00AF     		add	r7, sp, #0
 395              	.LCFI10:
 396              		.cfi_def_cfa_register 7
  98:../Sources/LineScanCamera.c **** 	int i;
  99:../Sources/LineScanCamera.c **** 	int limit = 0;
 397              		.loc 1 99 0
 398 0006 0023     		mov	r3, #0
 399 0008 3B60     		str	r3, [r7]
 100:../Sources/LineScanCamera.c **** 	for(i=1; i<99; i++)
 400              		.loc 1 100 0
 401 000a 0123     		mov	r3, #1
 402 000c 7B60     		str	r3, [r7, #4]
 403 000e 0FE0     		b	.L20
 404              	.L22:
 101:../Sources/LineScanCamera.c **** 		if(LineScanData[i] > limit)
 405              		.loc 1 101 0
 406 0010 0B4B     		ldr	r3, .L24
 407 0012 7A68     		ldr	r2, [r7, #4]
 408 0014 5200     		lsl	r2, r2, #1
 409 0016 D35A     		ldrh	r3, [r2, r3]
 410 0018 1A1C     		mov	r2, r3
 411 001a 3B68     		ldr	r3, [r7]
 412 001c 9A42     		cmp	r2, r3
 413 001e 04DD     		ble	.L21
 102:../Sources/LineScanCamera.c **** 			limit = LineScanData[i];
 414              		.loc 1 102 0
 415 0020 074B     		ldr	r3, .L24
 416 0022 7A68     		ldr	r2, [r7, #4]
 417 0024 5200     		lsl	r2, r2, #1
 418 0026 D35A     		ldrh	r3, [r2, r3]
 419 0028 3B60     		str	r3, [r7]
 420              	.L21:
 100:../Sources/LineScanCamera.c **** 	for(i=1; i<99; i++)
 421              		.loc 1 100 0
 422 002a 7B68     		ldr	r3, [r7, #4]
 423 002c 0133     		add	r3, r3, #1
 424 002e 7B60     		str	r3, [r7, #4]
 425              	.L20:
 100:../Sources/LineScanCamera.c **** 	for(i=1; i<99; i++)
 426              		.loc 1 100 0 is_stmt 0
 427 0030 7B68     		ldr	r3, [r7, #4]
 428 0032 622B     		cmp	r3, #98
 429 0034 ECDD     		ble	.L22
 103:../Sources/LineScanCamera.c **** 	return limit;
 430              		.loc 1 103 0 is_stmt 1
 431 0036 3B68     		ldr	r3, [r7]
 104:../Sources/LineScanCamera.c **** }
 432              		.loc 1 104 0
 433 0038 181C     		mov	r0, r3
 434 003a BD46     		mov	sp, r7
 435 003c 02B0     		add	sp, sp, #8
 436              		@ sp needed for prologue
 437 003e 80BD     		pop	{r7, pc}
 438              	.L25:
 439              		.align	2
 440              	.L24:
 441 0040 00000000 		.word	LineScanData
 442              		.cfi_endproc
 443              	.LFE3:
 445              		.section	.text.minValue,"ax",%progbits
 446              		.align	2
 447              		.global	minValue
 448              		.code	16
 449              		.thumb_func
 451              	minValue:
 452              	.LFB4:
 105:../Sources/LineScanCamera.c **** 
 106:../Sources/LineScanCamera.c **** /* Minimum value of data set */
 107:../Sources/LineScanCamera.c **** int minValue()
 108:../Sources/LineScanCamera.c **** {
 453              		.loc 1 108 0
 454              		.cfi_startproc
 455 0000 80B5     		push	{r7, lr}
 456              	.LCFI11:
 457              		.cfi_def_cfa_offset 8
 458              		.cfi_offset 7, -8
 459              		.cfi_offset 14, -4
 460 0002 82B0     		sub	sp, sp, #8
 461              	.LCFI12:
 462              		.cfi_def_cfa_offset 16
 463 0004 00AF     		add	r7, sp, #0
 464              	.LCFI13:
 465              		.cfi_def_cfa_register 7
 109:../Sources/LineScanCamera.c **** 	int i;
 110:../Sources/LineScanCamera.c **** 	int limit = 4096;
 466              		.loc 1 110 0
 467 0006 8023     		mov	r3, #128
 468 0008 5B01     		lsl	r3, r3, #5
 469 000a 3B60     		str	r3, [r7]
 111:../Sources/LineScanCamera.c **** 	for(i=1; i<99; i++)
 470              		.loc 1 111 0
 471 000c 0123     		mov	r3, #1
 472 000e 7B60     		str	r3, [r7, #4]
 473 0010 0FE0     		b	.L27
 474              	.L29:
 112:../Sources/LineScanCamera.c **** 		if(LineScanData[i] < limit)
 475              		.loc 1 112 0
 476 0012 0C4B     		ldr	r3, .L31
 477 0014 7A68     		ldr	r2, [r7, #4]
 478 0016 5200     		lsl	r2, r2, #1
 479 0018 D35A     		ldrh	r3, [r2, r3]
 480 001a 1A1C     		mov	r2, r3
 481 001c 3B68     		ldr	r3, [r7]
 482 001e 9A42     		cmp	r2, r3
 483 0020 04DA     		bge	.L28
 113:../Sources/LineScanCamera.c **** 			limit = LineScanData[i];
 484              		.loc 1 113 0
 485 0022 084B     		ldr	r3, .L31
 486 0024 7A68     		ldr	r2, [r7, #4]
 487 0026 5200     		lsl	r2, r2, #1
 488 0028 D35A     		ldrh	r3, [r2, r3]
 489 002a 3B60     		str	r3, [r7]
 490              	.L28:
 111:../Sources/LineScanCamera.c **** 	for(i=1; i<99; i++)
 491              		.loc 1 111 0
 492 002c 7B68     		ldr	r3, [r7, #4]
 493 002e 0133     		add	r3, r3, #1
 494 0030 7B60     		str	r3, [r7, #4]
 495              	.L27:
 111:../Sources/LineScanCamera.c **** 	for(i=1; i<99; i++)
 496              		.loc 1 111 0 is_stmt 0
 497 0032 7B68     		ldr	r3, [r7, #4]
 498 0034 622B     		cmp	r3, #98
 499 0036 ECDD     		ble	.L29
 114:../Sources/LineScanCamera.c **** 	return limit;
 500              		.loc 1 114 0 is_stmt 1
 501 0038 3B68     		ldr	r3, [r7]
 115:../Sources/LineScanCamera.c **** }
 502              		.loc 1 115 0
 503 003a 181C     		mov	r0, r3
 504 003c BD46     		mov	sp, r7
 505 003e 02B0     		add	sp, sp, #8
 506              		@ sp needed for prologue
 507 0040 80BD     		pop	{r7, pc}
 508              	.L32:
 509 0042 C046     		.align	2
 510              	.L31:
 511 0044 00000000 		.word	LineScanData
 512              		.cfi_endproc
 513              	.LFE4:
 515              		.global	__aeabi_i2d
 516              		.global	__aeabi_dcmpgt
 517              		.global	__aeabi_idiv
 518              		.global	__aeabi_d2uiz
 519              		.section	.text.stretchFilter,"ax",%progbits
 520              		.align	2
 521              		.global	stretchFilter
 522              		.code	16
 523              		.thumb_func
 525              	stretchFilter:
 526              	.LFB5:
 116:../Sources/LineScanCamera.c **** 
 117:../Sources/LineScanCamera.c **** void stretchFilter()
 118:../Sources/LineScanCamera.c **** {
 527              		.loc 1 118 0
 528              		.cfi_startproc
 529 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 530              	.LCFI14:
 531              		.cfi_def_cfa_offset 20
 532              		.cfi_offset 4, -20
 533              		.cfi_offset 5, -16
 534              		.cfi_offset 6, -12
 535              		.cfi_offset 7, -8
 536              		.cfi_offset 14, -4
 537 0002 89B0     		sub	sp, sp, #36
 538              	.LCFI15:
 539              		.cfi_def_cfa_offset 56
 540 0004 00AF     		add	r7, sp, #0
 541              	.LCFI16:
 542              		.cfi_def_cfa_register 7
 119:../Sources/LineScanCamera.c **** 	int i;
 120:../Sources/LineScanCamera.c **** 	int sum=0;
 543              		.loc 1 120 0
 544 0006 0023     		mov	r3, #0
 545 0008 BB61     		str	r3, [r7, #24]
 121:../Sources/LineScanCamera.c **** 	int low_cut;
 122:../Sources/LineScanCamera.c **** 	int high_cut;
 123:../Sources/LineScanCamera.c **** 	double factor;
 124:../Sources/LineScanCamera.c **** 	int max,min;
 125:../Sources/LineScanCamera.c **** 	
 126:../Sources/LineScanCamera.c **** 	max = maxValue();
 546              		.loc 1 126 0
 547 000a FFF7FEFF 		bl	maxValue
 548 000e 031C     		mov	r3, r0
 549 0010 7B61     		str	r3, [r7, #20]
 127:../Sources/LineScanCamera.c **** 	min = minValue();
 550              		.loc 1 127 0
 551 0012 FFF7FEFF 		bl	minValue
 552 0016 031C     		mov	r3, r0
 553 0018 3B61     		str	r3, [r7, #16]
 128:../Sources/LineScanCamera.c **** 	factor = (double)max/(double)(max-min);
 554              		.loc 1 128 0
 555 001a 7869     		ldr	r0, [r7, #20]
 556 001c FFF7FEFF 		bl	__aeabi_i2d
 557 0020 051C     		mov	r5, r0
 558 0022 0E1C     		mov	r6, r1
 559 0024 7A69     		ldr	r2, [r7, #20]
 560 0026 3B69     		ldr	r3, [r7, #16]
 561 0028 D31A     		sub	r3, r2, r3
 562 002a 181C     		mov	r0, r3
 563 002c FFF7FEFF 		bl	__aeabi_i2d
 564 0030 031C     		mov	r3, r0
 565 0032 0C1C     		mov	r4, r1
 566 0034 281C     		mov	r0, r5
 567 0036 311C     		mov	r1, r6
 568 0038 1A1C     		mov	r2, r3
 569 003a 231C     		mov	r3, r4
 570 003c FFF7FEFF 		bl	__aeabi_ddiv
 571 0040 031C     		mov	r3, r0
 572 0042 0C1C     		mov	r4, r1
 573 0044 BB60     		str	r3, [r7, #8]
 574 0046 FC60     		str	r4, [r7, #12]
 129:../Sources/LineScanCamera.c **** 	
 130:../Sources/LineScanCamera.c **** 	if(factor > 2.5)
 575              		.loc 1 130 0
 576 0048 B868     		ldr	r0, [r7, #8]
 577 004a F968     		ldr	r1, [r7, #12]
 578 004c 5B4B     		ldr	r3, .L54+4
 579 004e 5A4A     		ldr	r2, .L54
 580 0050 FFF7FEFF 		bl	__aeabi_dcmpgt
 581 0054 031C     		mov	r3, r0
 582 0056 002B     		cmp	r3, #0
 583 0058 0ED0     		beq	.L53
 584              	.L52:
 131:../Sources/LineScanCamera.c **** 	{
 132:../Sources/LineScanCamera.c **** 		for(i=0; i<100; i++)
 585              		.loc 1 132 0
 586 005a 0023     		mov	r3, #0
 587 005c FB61     		str	r3, [r7, #28]
 588 005e 07E0     		b	.L36
 589              	.L37:
 133:../Sources/LineScanCamera.c **** 			LineScanData[i] = 1010;
 590              		.loc 1 133 0
 591 0060 574B     		ldr	r3, .L54+8
 592 0062 FA69     		ldr	r2, [r7, #28]
 593 0064 5200     		lsl	r2, r2, #1
 594 0066 5749     		ldr	r1, .L54+12
 595 0068 D152     		strh	r1, [r2, r3]
 132:../Sources/LineScanCamera.c **** 		for(i=0; i<100; i++)
 596              		.loc 1 132 0
 597 006a FB69     		ldr	r3, [r7, #28]
 598 006c 0133     		add	r3, r3, #1
 599 006e FB61     		str	r3, [r7, #28]
 600              	.L36:
 132:../Sources/LineScanCamera.c **** 		for(i=0; i<100; i++)
 601              		.loc 1 132 0 is_stmt 0
 602 0070 FB69     		ldr	r3, [r7, #28]
 603 0072 632B     		cmp	r3, #99
 604 0074 F4DD     		ble	.L37
 134:../Sources/LineScanCamera.c **** 		return;
 605              		.loc 1 134 0 is_stmt 1
 606 0076 9BE0     		b	.L33
 607              	.L53:
 135:../Sources/LineScanCamera.c **** 	}
 136:../Sources/LineScanCamera.c **** 	
 137:../Sources/LineScanCamera.c **** 	for(i=0;i<4096;i++)
 608              		.loc 1 137 0
 609 0078 0023     		mov	r3, #0
 610 007a FB61     		str	r3, [r7, #28]
 611 007c 07E0     		b	.L39
 612              	.L40:
 138:../Sources/LineScanCamera.c **** 		histogram[i]=0;
 613              		.loc 1 138 0
 614 007e 524A     		ldr	r2, .L54+16
 615 0080 FB69     		ldr	r3, [r7, #28]
 616 0082 D318     		add	r3, r2, r3
 617 0084 0022     		mov	r2, #0
 618 0086 1A70     		strb	r2, [r3]
 137:../Sources/LineScanCamera.c **** 	for(i=0;i<4096;i++)
 619              		.loc 1 137 0
 620 0088 FB69     		ldr	r3, [r7, #28]
 621 008a 0133     		add	r3, r3, #1
 622 008c FB61     		str	r3, [r7, #28]
 623              	.L39:
 137:../Sources/LineScanCamera.c **** 	for(i=0;i<4096;i++)
 624              		.loc 1 137 0 is_stmt 0
 625 008e FA69     		ldr	r2, [r7, #28]
 626 0090 4E4B     		ldr	r3, .L54+20
 627 0092 9A42     		cmp	r2, r3
 628 0094 F3DD     		ble	.L40
 139:../Sources/LineScanCamera.c **** 	for(i=0;i<100;i++)
 629              		.loc 1 139 0 is_stmt 1
 630 0096 0023     		mov	r3, #0
 631 0098 FB61     		str	r3, [r7, #28]
 632 009a 0CE0     		b	.L41
 633              	.L42:
 140:../Sources/LineScanCamera.c **** 		histogram[LineScanData[i]]++;
 634              		.loc 1 140 0
 635 009c 484B     		ldr	r3, .L54+8
 636 009e FA69     		ldr	r2, [r7, #28]
 637 00a0 5200     		lsl	r2, r2, #1
 638 00a2 D35A     		ldrh	r3, [r2, r3]
 639 00a4 484A     		ldr	r2, .L54+16
 640 00a6 D25C     		ldrb	r2, [r2, r3]
 641 00a8 0132     		add	r2, r2, #1
 642 00aa D1B2     		uxtb	r1, r2
 643 00ac 464A     		ldr	r2, .L54+16
 644 00ae D154     		strb	r1, [r2, r3]
 139:../Sources/LineScanCamera.c **** 	for(i=0;i<100;i++)
 645              		.loc 1 139 0
 646 00b0 FB69     		ldr	r3, [r7, #28]
 647 00b2 0133     		add	r3, r3, #1
 648 00b4 FB61     		str	r3, [r7, #28]
 649              	.L41:
 139:../Sources/LineScanCamera.c **** 	for(i=0;i<100;i++)
 650              		.loc 1 139 0 is_stmt 0
 651 00b6 FB69     		ldr	r3, [r7, #28]
 652 00b8 632B     		cmp	r3, #99
 653 00ba EFDD     		ble	.L42
 141:../Sources/LineScanCamera.c **** 	i=0;
 654              		.loc 1 141 0 is_stmt 1
 655 00bc 0023     		mov	r3, #0
 656 00be FB61     		str	r3, [r7, #28]
 142:../Sources/LineScanCamera.c **** 	while(sum < 5)
 657              		.loc 1 142 0
 658 00c0 09E0     		b	.L43
 659              	.L44:
 143:../Sources/LineScanCamera.c **** 		sum += histogram[i++];
 660              		.loc 1 143 0
 661 00c2 414A     		ldr	r2, .L54+16
 662 00c4 FB69     		ldr	r3, [r7, #28]
 663 00c6 D318     		add	r3, r2, r3
 664 00c8 1B78     		ldrb	r3, [r3]
 665 00ca BA69     		ldr	r2, [r7, #24]
 666 00cc D318     		add	r3, r2, r3
 667 00ce BB61     		str	r3, [r7, #24]
 668 00d0 FB69     		ldr	r3, [r7, #28]
 669 00d2 0133     		add	r3, r3, #1
 670 00d4 FB61     		str	r3, [r7, #28]
 671              	.L43:
 142:../Sources/LineScanCamera.c **** 	while(sum < 5)
 672              		.loc 1 142 0
 673 00d6 BB69     		ldr	r3, [r7, #24]
 674 00d8 042B     		cmp	r3, #4
 675 00da F2DD     		ble	.L44
 144:../Sources/LineScanCamera.c **** 	low_cut = i;
 676              		.loc 1 144 0
 677 00dc FB69     		ldr	r3, [r7, #28]
 678 00de 7B60     		str	r3, [r7, #4]
 145:../Sources/LineScanCamera.c **** 	sum = 0;
 679              		.loc 1 145 0
 680 00e0 0023     		mov	r3, #0
 681 00e2 BB61     		str	r3, [r7, #24]
 146:../Sources/LineScanCamera.c **** 	i = 4095;
 682              		.loc 1 146 0
 683 00e4 394B     		ldr	r3, .L54+20
 684 00e6 FB61     		str	r3, [r7, #28]
 147:../Sources/LineScanCamera.c **** 	while(sum < 5)
 685              		.loc 1 147 0
 686 00e8 09E0     		b	.L45
 687              	.L46:
 148:../Sources/LineScanCamera.c **** 		sum += histogram[i--];
 688              		.loc 1 148 0
 689 00ea 374A     		ldr	r2, .L54+16
 690 00ec FB69     		ldr	r3, [r7, #28]
 691 00ee D318     		add	r3, r2, r3
 692 00f0 1B78     		ldrb	r3, [r3]
 693 00f2 BA69     		ldr	r2, [r7, #24]
 694 00f4 D318     		add	r3, r2, r3
 695 00f6 BB61     		str	r3, [r7, #24]
 696 00f8 FB69     		ldr	r3, [r7, #28]
 697 00fa 013B     		sub	r3, r3, #1
 698 00fc FB61     		str	r3, [r7, #28]
 699              	.L45:
 147:../Sources/LineScanCamera.c **** 	while(sum < 5)
 700              		.loc 1 147 0
 701 00fe BB69     		ldr	r3, [r7, #24]
 702 0100 042B     		cmp	r3, #4
 703 0102 F2DD     		ble	.L46
 149:../Sources/LineScanCamera.c **** 	high_cut = i;
 704              		.loc 1 149 0
 705 0104 FB69     		ldr	r3, [r7, #28]
 706 0106 3B60     		str	r3, [r7]
 150:../Sources/LineScanCamera.c **** 	
 151:../Sources/LineScanCamera.c **** 	factor = (4096 / (high_cut-low_cut));
 707              		.loc 1 151 0
 708 0108 3A68     		ldr	r2, [r7]
 709 010a 7B68     		ldr	r3, [r7, #4]
 710 010c D31A     		sub	r3, r2, r3
 711 010e 8022     		mov	r2, #128
 712 0110 5001     		lsl	r0, r2, #5
 713 0112 191C     		mov	r1, r3
 714 0114 FFF7FEFF 		bl	__aeabi_idiv
 715 0118 031C     		mov	r3, r0
 716 011a 181C     		mov	r0, r3
 717 011c FFF7FEFF 		bl	__aeabi_i2d
 718 0120 031C     		mov	r3, r0
 719 0122 0C1C     		mov	r4, r1
 720 0124 BB60     		str	r3, [r7, #8]
 721 0126 FC60     		str	r4, [r7, #12]
 152:../Sources/LineScanCamera.c **** 	
 153:../Sources/LineScanCamera.c **** 	for(i=0; i<100; i++)
 722              		.loc 1 153 0
 723 0128 0023     		mov	r3, #0
 724 012a FB61     		str	r3, [r7, #28]
 725 012c 3DE0     		b	.L47
 726              	.L51:
 154:../Sources/LineScanCamera.c **** 		if(LineScanData[i]<=low_cut)
 727              		.loc 1 154 0
 728 012e 244B     		ldr	r3, .L54+8
 729 0130 FA69     		ldr	r2, [r7, #28]
 730 0132 5200     		lsl	r2, r2, #1
 731 0134 D35A     		ldrh	r3, [r2, r3]
 732 0136 1A1C     		mov	r2, r3
 733 0138 7B68     		ldr	r3, [r7, #4]
 734 013a 9A42     		cmp	r2, r3
 735 013c 05DC     		bgt	.L48
 155:../Sources/LineScanCamera.c **** 			LineScanData[i] = 0;
 736              		.loc 1 155 0
 737 013e 204B     		ldr	r3, .L54+8
 738 0140 FA69     		ldr	r2, [r7, #28]
 739 0142 5200     		lsl	r2, r2, #1
 740 0144 0021     		mov	r1, #0
 741 0146 D152     		strh	r1, [r2, r3]
 742 0148 2CE0     		b	.L49
 743              	.L48:
 156:../Sources/LineScanCamera.c **** 		else if(LineScanData[i]>=high_cut)
 744              		.loc 1 156 0
 745 014a 1D4B     		ldr	r3, .L54+8
 746 014c FA69     		ldr	r2, [r7, #28]
 747 014e 5200     		lsl	r2, r2, #1
 748 0150 D35A     		ldrh	r3, [r2, r3]
 749 0152 1A1C     		mov	r2, r3
 750 0154 3B68     		ldr	r3, [r7]
 751 0156 9A42     		cmp	r2, r3
 752 0158 06DB     		blt	.L50
 157:../Sources/LineScanCamera.c **** 			LineScanData[i] = 4096;
 753              		.loc 1 157 0
 754 015a 194B     		ldr	r3, .L54+8
 755 015c FA69     		ldr	r2, [r7, #28]
 756 015e 5200     		lsl	r2, r2, #1
 757 0160 8021     		mov	r1, #128
 758 0162 4901     		lsl	r1, r1, #5
 759 0164 D152     		strh	r1, [r2, r3]
 760 0166 1DE0     		b	.L49
 761              	.L50:
 158:../Sources/LineScanCamera.c **** 		else
 159:../Sources/LineScanCamera.c **** 			LineScanData[i] = (LineScanData[i]-low_cut) * factor;
 762              		.loc 1 159 0
 763 0168 154B     		ldr	r3, .L54+8
 764 016a FA69     		ldr	r2, [r7, #28]
 765 016c 5200     		lsl	r2, r2, #1
 766 016e D35A     		ldrh	r3, [r2, r3]
 767 0170 1A1C     		mov	r2, r3
 768 0172 7B68     		ldr	r3, [r7, #4]
 769 0174 D31A     		sub	r3, r2, r3
 770 0176 181C     		mov	r0, r3
 771 0178 FFF7FEFF 		bl	__aeabi_i2d
 772 017c 031C     		mov	r3, r0
 773 017e 0C1C     		mov	r4, r1
 774 0180 181C     		mov	r0, r3
 775 0182 211C     		mov	r1, r4
 776 0184 BA68     		ldr	r2, [r7, #8]
 777 0186 FB68     		ldr	r3, [r7, #12]
 778 0188 FFF7FEFF 		bl	__aeabi_dmul
 779 018c 031C     		mov	r3, r0
 780 018e 0C1C     		mov	r4, r1
 781 0190 181C     		mov	r0, r3
 782 0192 211C     		mov	r1, r4
 783 0194 FFF7FEFF 		bl	__aeabi_d2uiz
 784 0198 031C     		mov	r3, r0
 785 019a 99B2     		uxth	r1, r3
 786 019c 084B     		ldr	r3, .L54+8
 787 019e FA69     		ldr	r2, [r7, #28]
 788 01a0 5200     		lsl	r2, r2, #1
 789 01a2 D152     		strh	r1, [r2, r3]
 790              	.L49:
 153:../Sources/LineScanCamera.c **** 	for(i=0; i<100; i++)
 791              		.loc 1 153 0
 792 01a4 FB69     		ldr	r3, [r7, #28]
 793 01a6 0133     		add	r3, r3, #1
 794 01a8 FB61     		str	r3, [r7, #28]
 795              	.L47:
 153:../Sources/LineScanCamera.c **** 	for(i=0; i<100; i++)
 796              		.loc 1 153 0 is_stmt 0
 797 01aa FB69     		ldr	r3, [r7, #28]
 798 01ac 632B     		cmp	r3, #99
 799 01ae BEDD     		ble	.L51
 800              	.L33:
 160:../Sources/LineScanCamera.c **** }
 801              		.loc 1 160 0 is_stmt 1
 802 01b0 BD46     		mov	sp, r7
 803 01b2 09B0     		add	sp, sp, #36
 804              		@ sp needed for prologue
 805 01b4 F0BD     		pop	{r4, r5, r6, r7, pc}
 806              	.L55:
 807 01b6 C046     		.align	3
 808              	.L54:
 809 01b8 00000000 		.word	0
 810 01bc 00000440 		.word	1074003968
 811 01c0 00000000 		.word	LineScanData
 812 01c4 F2030000 		.word	1010
 813 01c8 00000000 		.word	histogram
 814 01cc FF0F0000 		.word	4095
 815              		.cfi_endproc
 816              	.LFE5:
 818              		.section	.text.isFinish,"ax",%progbits
 819              		.align	2
 820              		.global	isFinish
 821              		.code	16
 822              		.thumb_func
 824              	isFinish:
 825              	.LFB6:
 161:../Sources/LineScanCamera.c **** 
 162:../Sources/LineScanCamera.c **** /*
 163:../Sources/LineScanCamera.c ****  * Finds finish by counting two small white bars
 164:../Sources/LineScanCamera.c ****  */
 165:../Sources/LineScanCamera.c **** int isFinish()
 166:../Sources/LineScanCamera.c **** {
 826              		.loc 1 166 0
 827              		.cfi_startproc
 828 0000 80B5     		push	{r7, lr}
 829              	.LCFI17:
 830              		.cfi_def_cfa_offset 8
 831              		.cfi_offset 7, -8
 832              		.cfi_offset 14, -4
 833 0002 84B0     		sub	sp, sp, #16
 834              	.LCFI18:
 835              		.cfi_def_cfa_offset 24
 836 0004 00AF     		add	r7, sp, #0
 837              	.LCFI19:
 838              		.cfi_def_cfa_register 7
 167:../Sources/LineScanCamera.c **** 	int width,i;
 168:../Sources/LineScanCamera.c **** 	int wcount = 0;
 839              		.loc 1 168 0
 840 0006 0023     		mov	r3, #0
 841 0008 7B60     		str	r3, [r7, #4]
 169:../Sources/LineScanCamera.c **** 	width = -100;
 842              		.loc 1 169 0
 843 000a 6423     		mov	r3, #100
 844 000c 5B42     		neg	r3, r3
 845 000e FB60     		str	r3, [r7, #12]
 170:../Sources/LineScanCamera.c **** 	for(i=1; i<100; i++)
 846              		.loc 1 170 0
 847 0010 0123     		mov	r3, #1
 848 0012 BB60     		str	r3, [r7, #8]
 849 0014 21E0     		b	.L57
 850              	.L62:
 171:../Sources/LineScanCamera.c **** 	{
 172:../Sources/LineScanCamera.c **** 		if(LineScanData[i] == 1)
 851              		.loc 1 172 0
 852 0016 174B     		ldr	r3, .L64
 853 0018 BA68     		ldr	r2, [r7, #8]
 854 001a 5200     		lsl	r2, r2, #1
 855 001c D35A     		ldrh	r3, [r2, r3]
 856 001e 012B     		cmp	r3, #1
 857 0020 0DD1     		bne	.L58
 173:../Sources/LineScanCamera.c **** 		{
 174:../Sources/LineScanCamera.c **** 			// Start new black bar
 175:../Sources/LineScanCamera.c **** 			if((LineScanData[i-1] == 0))
 858              		.loc 1 175 0
 859 0022 BB68     		ldr	r3, [r7, #8]
 860 0024 5A1E     		sub	r2, r3, #1
 861 0026 134B     		ldr	r3, .L64
 862 0028 5200     		lsl	r2, r2, #1
 863 002a D35A     		ldrh	r3, [r2, r3]
 864 002c 002B     		cmp	r3, #0
 865 002e 02D1     		bne	.L59
 176:../Sources/LineScanCamera.c **** 				width = 1;
 866              		.loc 1 176 0
 867 0030 0123     		mov	r3, #1
 868 0032 FB60     		str	r3, [r7, #12]
 869 0034 0EE0     		b	.L60
 870              	.L59:
 177:../Sources/LineScanCamera.c **** 			else
 178:../Sources/LineScanCamera.c **** 				width++;
 871              		.loc 1 178 0
 872 0036 FB68     		ldr	r3, [r7, #12]
 873 0038 0133     		add	r3, r3, #1
 874 003a FB60     		str	r3, [r7, #12]
 875 003c 0AE0     		b	.L60
 876              	.L58:
 179:../Sources/LineScanCamera.c **** 		}
 180:../Sources/LineScanCamera.c **** 		else
 181:../Sources/LineScanCamera.c **** 		{
 182:../Sources/LineScanCamera.c **** 			if((width > 10) && (width < 12))
 877              		.loc 1 182 0
 878 003e FB68     		ldr	r3, [r7, #12]
 879 0040 0A2B     		cmp	r3, #10
 880 0042 05DD     		ble	.L61
 881              		.loc 1 182 0 is_stmt 0
 882 0044 FB68     		ldr	r3, [r7, #12]
 883 0046 0B2B     		cmp	r3, #11
 884 0048 02DC     		bgt	.L61
 183:../Sources/LineScanCamera.c **** 				wcount++;
 885              		.loc 1 183 0 is_stmt 1
 886 004a 7B68     		ldr	r3, [r7, #4]
 887 004c 0133     		add	r3, r3, #1
 888 004e 7B60     		str	r3, [r7, #4]
 889              	.L61:
 184:../Sources/LineScanCamera.c **** 			width = 0;
 890              		.loc 1 184 0
 891 0050 0023     		mov	r3, #0
 892 0052 FB60     		str	r3, [r7, #12]
 893              	.L60:
 170:../Sources/LineScanCamera.c **** 	for(i=1; i<100; i++)
 894              		.loc 1 170 0
 895 0054 BB68     		ldr	r3, [r7, #8]
 896 0056 0133     		add	r3, r3, #1
 897 0058 BB60     		str	r3, [r7, #8]
 898              	.L57:
 170:../Sources/LineScanCamera.c **** 	for(i=1; i<100; i++)
 899              		.loc 1 170 0 is_stmt 0
 900 005a BB68     		ldr	r3, [r7, #8]
 901 005c 632B     		cmp	r3, #99
 902 005e DADD     		ble	.L62
 185:../Sources/LineScanCamera.c **** 		}
 186:../Sources/LineScanCamera.c **** 	}
 187:../Sources/LineScanCamera.c **** 	return (wcount == 2);
 903              		.loc 1 187 0 is_stmt 1
 904 0060 7B68     		ldr	r3, [r7, #4]
 905 0062 023B     		sub	r3, r3, #2
 906 0064 5A42     		neg	r2, r3
 907 0066 5341     		adc	r3, r3, r2
 908 0068 DBB2     		uxtb	r3, r3
 188:../Sources/LineScanCamera.c **** }
 909              		.loc 1 188 0
 910 006a 181C     		mov	r0, r3
 911 006c BD46     		mov	sp, r7
 912 006e 04B0     		add	sp, sp, #16
 913              		@ sp needed for prologue
 914 0070 80BD     		pop	{r7, pc}
 915              	.L65:
 916 0072 C046     		.align	2
 917              	.L64:
 918 0074 00000000 		.word	LineScanData
 919              		.cfi_endproc
 920              	.LFE6:
 922              		.section	.text.filterData,"ax",%progbits
 923              		.align	2
 924              		.global	filterData
 925              		.code	16
 926              		.thumb_func
 928              	filterData:
 929              	.LFB7:
 189:../Sources/LineScanCamera.c **** 
 190:../Sources/LineScanCamera.c **** void filterData()
 191:../Sources/LineScanCamera.c **** {
 930              		.loc 1 191 0
 931              		.cfi_startproc
 932 0000 80B5     		push	{r7, lr}
 933              	.LCFI20:
 934              		.cfi_def_cfa_offset 8
 935              		.cfi_offset 7, -8
 936              		.cfi_offset 14, -4
 937 0002 82B0     		sub	sp, sp, #8
 938              	.LCFI21:
 939              		.cfi_def_cfa_offset 16
 940 0004 00AF     		add	r7, sp, #0
 941              	.LCFI22:
 942              		.cfi_def_cfa_register 7
 192:../Sources/LineScanCamera.c **** 	int i;
 193:../Sources/LineScanCamera.c **** 	
 194:../Sources/LineScanCamera.c **** 	int threshold = 0;
 943              		.loc 1 194 0
 944 0006 0023     		mov	r3, #0
 945 0008 3B60     		str	r3, [r7]
 195:../Sources/LineScanCamera.c **** 	
 196:../Sources/LineScanCamera.c **** 	// Copy from image to data for modification
 197:../Sources/LineScanCamera.c **** 	for(i=14; i<114; i++)
 946              		.loc 1 197 0
 947 000a 0E23     		mov	r3, #14
 948 000c 7B60     		str	r3, [r7, #4]
 949 000e 17E0     		b	.L67
 950              	.L68:
 198:../Sources/LineScanCamera.c **** 		LineScanData[i-14] += LineScanImage[i];
 951              		.loc 1 198 0
 952 0010 7B68     		ldr	r3, [r7, #4]
 953 0012 1A1C     		mov	r2, r3
 954 0014 0E3A     		sub	r2, r2, #14
 955 0016 7B68     		ldr	r3, [r7, #4]
 956 0018 191C     		mov	r1, r3
 957 001a 0E39     		sub	r1, r1, #14
 958 001c 284B     		ldr	r3, .L74
 959 001e 4900     		lsl	r1, r1, #1
 960 0020 C95A     		ldrh	r1, [r1, r3]
 961 0022 284B     		ldr	r3, .L74+4
 962 0024 1868     		ldr	r0, [r3]
 963 0026 7B68     		ldr	r3, [r7, #4]
 964 0028 5B00     		lsl	r3, r3, #1
 965 002a C318     		add	r3, r0, r3
 966 002c 1B88     		ldrh	r3, [r3]
 967 002e 9BB2     		uxth	r3, r3
 968 0030 CB18     		add	r3, r1, r3
 969 0032 99B2     		uxth	r1, r3
 970 0034 224B     		ldr	r3, .L74
 971 0036 5200     		lsl	r2, r2, #1
 972 0038 D152     		strh	r1, [r2, r3]
 197:../Sources/LineScanCamera.c **** 	for(i=14; i<114; i++)
 973              		.loc 1 197 0
 974 003a 7B68     		ldr	r3, [r7, #4]
 975 003c 0133     		add	r3, r3, #1
 976 003e 7B60     		str	r3, [r7, #4]
 977              	.L67:
 197:../Sources/LineScanCamera.c **** 	for(i=14; i<114; i++)
 978              		.loc 1 197 0 is_stmt 0
 979 0040 7B68     		ldr	r3, [r7, #4]
 980 0042 712B     		cmp	r3, #113
 981 0044 E4DD     		ble	.L68
 199:../Sources/LineScanCamera.c **** 	
 200:../Sources/LineScanCamera.c **** 	// Get rid of dark edges
 201:../Sources/LineScanCamera.c **** 	for(i=0; i<4; i++)
 982              		.loc 1 201 0 is_stmt 1
 983 0046 0023     		mov	r3, #0
 984 0048 7B60     		str	r3, [r7, #4]
 985 004a 11E0     		b	.L69
 986              	.L70:
 202:../Sources/LineScanCamera.c **** 	{
 203:../Sources/LineScanCamera.c **** 		LineScanData[i] = LineScanData[6];
 987              		.loc 1 203 0
 988 004c 1C4B     		ldr	r3, .L74
 989 004e 9989     		ldrh	r1, [r3, #12]
 990 0050 1B4B     		ldr	r3, .L74
 991 0052 7A68     		ldr	r2, [r7, #4]
 992 0054 5200     		lsl	r2, r2, #1
 993 0056 D152     		strh	r1, [r2, r3]
 204:../Sources/LineScanCamera.c **** 		LineScanData[(99-i)] = LineScanData[(93)];
 994              		.loc 1 204 0
 995 0058 7B68     		ldr	r3, [r7, #4]
 996 005a 6322     		mov	r2, #99
 997 005c D21A     		sub	r2, r2, r3
 998 005e 1849     		ldr	r1, .L74
 999 0060 BA23     		mov	r3, #186
 1000 0062 C95A     		ldrh	r1, [r1, r3]
 1001 0064 164B     		ldr	r3, .L74
 1002 0066 5200     		lsl	r2, r2, #1
 1003 0068 D152     		strh	r1, [r2, r3]
 201:../Sources/LineScanCamera.c **** 	for(i=0; i<4; i++)
 1004              		.loc 1 201 0
 1005 006a 7B68     		ldr	r3, [r7, #4]
 1006 006c 0133     		add	r3, r3, #1
 1007 006e 7B60     		str	r3, [r7, #4]
 1008              	.L69:
 201:../Sources/LineScanCamera.c **** 	for(i=0; i<4; i++)
 1009              		.loc 1 201 0 is_stmt 0
 1010 0070 7B68     		ldr	r3, [r7, #4]
 1011 0072 032B     		cmp	r3, #3
 1012 0074 EADD     		ble	.L70
 205:../Sources/LineScanCamera.c **** 	}
 206:../Sources/LineScanCamera.c **** 	
 207:../Sources/LineScanCamera.c **** 	// Median filter on raw data
 208:../Sources/LineScanCamera.c **** 	medianFilter();
 1013              		.loc 1 208 0 is_stmt 1
 1014 0076 FFF7FEFF 		bl	medianFilter
 209:../Sources/LineScanCamera.c **** 	
 210:../Sources/LineScanCamera.c **** 	stretchFilter();
 1015              		.loc 1 210 0
 1016 007a FFF7FEFF 		bl	stretchFilter
 211:../Sources/LineScanCamera.c **** 	
 212:../Sources/LineScanCamera.c **** 	threshold = 1000;
 1017              		.loc 1 212 0
 1018 007e FA23     		mov	r3, #250
 1019 0080 9B00     		lsl	r3, r3, #2
 1020 0082 3B60     		str	r3, [r7]
 213:../Sources/LineScanCamera.c **** 	
 214:../Sources/LineScanCamera.c **** 	// 1 for black, 0 for white
 215:../Sources/LineScanCamera.c **** 	for(i=0; i<100; i++)
 1021              		.loc 1 215 0
 1022 0084 0023     		mov	r3, #0
 1023 0086 7B60     		str	r3, [r7, #4]
 1024 0088 12E0     		b	.L71
 1025              	.L73:
 216:../Sources/LineScanCamera.c **** 		LineScanData[i] = (LineScanData[i] >= threshold) ? 0 : 1;
 1026              		.loc 1 216 0
 1027 008a 0D4B     		ldr	r3, .L74
 1028 008c 7A68     		ldr	r2, [r7, #4]
 1029 008e 5200     		lsl	r2, r2, #1
 1030 0090 D35A     		ldrh	r3, [r2, r3]
 1031 0092 191C     		mov	r1, r3
 1032 0094 0123     		mov	r3, #1
 1033 0096 3A68     		ldr	r2, [r7]
 1034 0098 9142     		cmp	r1, r2
 1035 009a 00DB     		blt	.L72
 1036 009c 0023     		mov	r3, #0
 1037              	.L72:
 1038 009e DBB2     		uxtb	r3, r3
 1039 00a0 191C     		mov	r1, r3
 1040 00a2 074B     		ldr	r3, .L74
 1041 00a4 7A68     		ldr	r2, [r7, #4]
 1042 00a6 5200     		lsl	r2, r2, #1
 1043 00a8 D152     		strh	r1, [r2, r3]
 215:../Sources/LineScanCamera.c **** 	for(i=0; i<100; i++)
 1044              		.loc 1 215 0
 1045 00aa 7B68     		ldr	r3, [r7, #4]
 1046 00ac 0133     		add	r3, r3, #1
 1047 00ae 7B60     		str	r3, [r7, #4]
 1048              	.L71:
 215:../Sources/LineScanCamera.c **** 	for(i=0; i<100; i++)
 1049              		.loc 1 215 0 is_stmt 0
 1050 00b0 7B68     		ldr	r3, [r7, #4]
 1051 00b2 632B     		cmp	r3, #99
 1052 00b4 E9DD     		ble	.L73
 217:../Sources/LineScanCamera.c **** 	
 218:../Sources/LineScanCamera.c **** 	// Median filter on 1,0 data to filter outliers
 219:../Sources/LineScanCamera.c **** 	medianFilter();
 1053              		.loc 1 219 0 is_stmt 1
 1054 00b6 FFF7FEFF 		bl	medianFilter
 220:../Sources/LineScanCamera.c **** }
 1055              		.loc 1 220 0
 1056 00ba BD46     		mov	sp, r7
 1057 00bc 02B0     		add	sp, sp, #8
 1058              		@ sp needed for prologue
 1059 00be 80BD     		pop	{r7, pc}
 1060              	.L75:
 1061              		.align	2
 1062              	.L74:
 1063 00c0 00000000 		.word	LineScanData
 1064 00c4 00000000 		.word	LineScanImage
 1065              		.cfi_endproc
 1066              	.LFE7:
 1068              		.section	.text.GetLineIndexCenter,"ax",%progbits
 1069              		.align	2
 1070              		.global	GetLineIndexCenter
 1071              		.code	16
 1072              		.thumb_func
 1074              	GetLineIndexCenter:
 1075              	.LFB8:
 221:../Sources/LineScanCamera.c **** 
 222:../Sources/LineScanCamera.c **** /*
 223:../Sources/LineScanCamera.c ****  * get the value in range (-100,100) for where in the spectrum the line center current lies
 224:../Sources/LineScanCamera.c ****  * returns Line Not Found (LNF) value if the line is not currently readable
 225:../Sources/LineScanCamera.c ****  * returns FINISH if finish line is passed
 226:../Sources/LineScanCamera.c **** */
 227:../Sources/LineScanCamera.c **** int GetLineIndexCenter()
 228:../Sources/LineScanCamera.c **** {
 1076              		.loc 1 228 0
 1077              		.cfi_startproc
 1078 0000 80B5     		push	{r7, lr}
 1079              	.LCFI23:
 1080              		.cfi_def_cfa_offset 8
 1081              		.cfi_offset 7, -8
 1082              		.cfi_offset 14, -4
 1083 0002 88B0     		sub	sp, sp, #32
 1084              	.LCFI24:
 1085              		.cfi_def_cfa_offset 40
 1086 0004 00AF     		add	r7, sp, #0
 1087              	.LCFI25:
 1088              		.cfi_def_cfa_register 7
 229:../Sources/LineScanCamera.c **** 	int position = 0;
 1089              		.loc 1 229 0
 1090 0006 0023     		mov	r3, #0
 1091 0008 FB61     		str	r3, [r7, #28]
 230:../Sources/LineScanCamera.c **** 	int i, left;
 231:../Sources/LineScanCamera.c **** 	int save_l = -1;
 1092              		.loc 1 231 0
 1093 000a 0123     		mov	r3, #1
 1094 000c 5B42     		neg	r3, r3
 1095 000e 3B61     		str	r3, [r7, #16]
 232:../Sources/LineScanCamera.c **** 	int save_r = -1;
 1096              		.loc 1 232 0
 1097 0010 0123     		mov	r3, #1
 1098 0012 5B42     		neg	r3, r3
 1099 0014 FB60     		str	r3, [r7, #12]
 233:../Sources/LineScanCamera.c **** 	int wcount = 0;
 1100              		.loc 1 233 0
 1101 0016 0023     		mov	r3, #0
 1102 0018 BB60     		str	r3, [r7, #8]
 234:../Sources/LineScanCamera.c **** 	int width;
 235:../Sources/LineScanCamera.c **** 	
 236:../Sources/LineScanCamera.c **** 	filterData();
 1103              		.loc 1 236 0
 1104 001a FFF7FEFF 		bl	filterData
 237:../Sources/LineScanCamera.c **** 	
 238:../Sources/LineScanCamera.c **** 	// Reset camera ready signal
 239:../Sources/LineScanCamera.c **** 	LineScanImageReady = FALSE;
 1105              		.loc 1 239 0
 1106 001e 264B     		ldr	r3, .L87
 1107 0020 0022     		mov	r2, #0
 1108 0022 1A70     		strb	r2, [r3]
 240:../Sources/LineScanCamera.c **** 	
 241:../Sources/LineScanCamera.c **** 	width = -100;
 1109              		.loc 1 241 0
 1110 0024 6423     		mov	r3, #100
 1111 0026 5B42     		neg	r3, r3
 1112 0028 7B60     		str	r3, [r7, #4]
 242:../Sources/LineScanCamera.c **** 	// Find center of the widest black bar
 243:../Sources/LineScanCamera.c **** 	// Does not count darkness connected to edges
 244:../Sources/LineScanCamera.c **** 	for(i=1; i<100; i++)
 1113              		.loc 1 244 0
 1114 002a 0123     		mov	r3, #1
 1115 002c BB61     		str	r3, [r7, #24]
 1116 002e 27E0     		b	.L77
 1117              	.L82:
 245:../Sources/LineScanCamera.c **** 	{
 246:../Sources/LineScanCamera.c **** 		if(LineScanData[i] == 1)
 1118              		.loc 1 246 0
 1119 0030 224B     		ldr	r3, .L87+4
 1120 0032 BA69     		ldr	r2, [r7, #24]
 1121 0034 5200     		lsl	r2, r2, #1
 1122 0036 D35A     		ldrh	r3, [r2, r3]
 1123 0038 012B     		cmp	r3, #1
 1124 003a 0FD1     		bne	.L78
 247:../Sources/LineScanCamera.c **** 		{
 248:../Sources/LineScanCamera.c **** 			// Start new black bar
 249:../Sources/LineScanCamera.c **** 			if((LineScanData[i-1] == 0))
 1125              		.loc 1 249 0
 1126 003c BB69     		ldr	r3, [r7, #24]
 1127 003e 5A1E     		sub	r2, r3, #1
 1128 0040 1E4B     		ldr	r3, .L87+4
 1129 0042 5200     		lsl	r2, r2, #1
 1130 0044 D35A     		ldrh	r3, [r2, r3]
 1131 0046 002B     		cmp	r3, #0
 1132 0048 04D1     		bne	.L79
 250:../Sources/LineScanCamera.c **** 			{
 251:../Sources/LineScanCamera.c **** 				left = i;
 1133              		.loc 1 251 0
 1134 004a BB69     		ldr	r3, [r7, #24]
 1135 004c 7B61     		str	r3, [r7, #20]
 252:../Sources/LineScanCamera.c **** 				width = 1;
 1136              		.loc 1 252 0
 1137 004e 0123     		mov	r3, #1
 1138 0050 7B60     		str	r3, [r7, #4]
 1139 0052 12E0     		b	.L80
 1140              	.L79:
 253:../Sources/LineScanCamera.c **** 			}
 254:../Sources/LineScanCamera.c **** 			else
 255:../Sources/LineScanCamera.c **** 				width++;
 1141              		.loc 1 255 0
 1142 0054 7B68     		ldr	r3, [r7, #4]
 1143 0056 0133     		add	r3, r3, #1
 1144 0058 7B60     		str	r3, [r7, #4]
 1145 005a 0EE0     		b	.L80
 1146              	.L78:
 256:../Sources/LineScanCamera.c **** 		}
 257:../Sources/LineScanCamera.c **** 		else
 258:../Sources/LineScanCamera.c **** 		{
 259:../Sources/LineScanCamera.c **** 			if((width < 22) && (width > 4))
 1147              		.loc 1 259 0
 1148 005c 7B68     		ldr	r3, [r7, #4]
 1149 005e 152B     		cmp	r3, #21
 1150 0060 09DC     		bgt	.L81
 1151              		.loc 1 259 0 is_stmt 0
 1152 0062 7B68     		ldr	r3, [r7, #4]
 1153 0064 042B     		cmp	r3, #4
 1154 0066 06DD     		ble	.L81
 260:../Sources/LineScanCamera.c **** 			{
 261:../Sources/LineScanCamera.c **** 				save_l = left;
 1155              		.loc 1 261 0 is_stmt 1
 1156 0068 7B69     		ldr	r3, [r7, #20]
 1157 006a 3B61     		str	r3, [r7, #16]
 262:../Sources/LineScanCamera.c **** 				save_r = i;
 1158              		.loc 1 262 0
 1159 006c BB69     		ldr	r3, [r7, #24]
 1160 006e FB60     		str	r3, [r7, #12]
 263:../Sources/LineScanCamera.c **** 				wcount++;
 1161              		.loc 1 263 0
 1162 0070 BB68     		ldr	r3, [r7, #8]
 1163 0072 0133     		add	r3, r3, #1
 1164 0074 BB60     		str	r3, [r7, #8]
 1165              	.L81:
 264:../Sources/LineScanCamera.c **** 			}
 265:../Sources/LineScanCamera.c **** 			width = 0;
 1166              		.loc 1 265 0
 1167 0076 0023     		mov	r3, #0
 1168 0078 7B60     		str	r3, [r7, #4]
 1169              	.L80:
 244:../Sources/LineScanCamera.c **** 	for(i=1; i<100; i++)
 1170              		.loc 1 244 0
 1171 007a BB69     		ldr	r3, [r7, #24]
 1172 007c 0133     		add	r3, r3, #1
 1173 007e BB61     		str	r3, [r7, #24]
 1174              	.L77:
 244:../Sources/LineScanCamera.c **** 	for(i=1; i<100; i++)
 1175              		.loc 1 244 0 is_stmt 0
 1176 0080 BB69     		ldr	r3, [r7, #24]
 1177 0082 632B     		cmp	r3, #99
 1178 0084 D4DD     		ble	.L82
 266:../Sources/LineScanCamera.c **** 		}
 267:../Sources/LineScanCamera.c **** 	}
 268:../Sources/LineScanCamera.c **** 	
 269:../Sources/LineScanCamera.c **** 	if(isFinish())
 1179              		.loc 1 269 0 is_stmt 1
 1180 0086 FFF7FEFF 		bl	isFinish
 1181 008a 031C     		mov	r3, r0
 1182 008c 002B     		cmp	r3, #0
 1183 008e 02D0     		beq	.L83
 270:../Sources/LineScanCamera.c **** 		position = FINISH;	
 1184              		.loc 1 270 0
 1185 0090 9823     		mov	r3, #152
 1186 0092 FB61     		str	r3, [r7, #28]
 1187 0094 0AE0     		b	.L84
 1188              	.L83:
 271:../Sources/LineScanCamera.c **** 	else if(wcount == 1)
 1189              		.loc 1 271 0
 1190 0096 BB68     		ldr	r3, [r7, #8]
 1191 0098 012B     		cmp	r3, #1
 1192 009a 05D1     		bne	.L85
 272:../Sources/LineScanCamera.c **** 		position = (save_r + save_l) - 100;
 1193              		.loc 1 272 0
 1194 009c FA68     		ldr	r2, [r7, #12]
 1195 009e 3B69     		ldr	r3, [r7, #16]
 1196 00a0 D318     		add	r3, r2, r3
 1197 00a2 643B     		sub	r3, r3, #100
 1198 00a4 FB61     		str	r3, [r7, #28]
 1199 00a6 01E0     		b	.L84
 1200              	.L85:
 273:../Sources/LineScanCamera.c **** 	else
 274:../Sources/LineScanCamera.c **** 		position = LNF;
 1201              		.loc 1 274 0
 1202 00a8 9723     		mov	r3, #151
 1203 00aa FB61     		str	r3, [r7, #28]
 1204              	.L84:
 275:../Sources/LineScanCamera.c **** 	return position;
 1205              		.loc 1 275 0
 1206 00ac FB69     		ldr	r3, [r7, #28]
 276:../Sources/LineScanCamera.c **** }
 1207              		.loc 1 276 0
 1208 00ae 181C     		mov	r0, r3
 1209 00b0 BD46     		mov	sp, r7
 1210 00b2 08B0     		add	sp, sp, #32
 1211              		@ sp needed for prologue
 1212 00b4 80BD     		pop	{r7, pc}
 1213              	.L88:
 1214 00b6 C046     		.align	2
 1215              	.L87:
 1216 00b8 00000000 		.word	LineScanImageReady
 1217 00bc 00000000 		.word	LineScanData
 1218              		.cfi_endproc
 1219              	.LFE8:
 1221              		.section	.text.GetLineIndexEdge,"ax",%progbits
 1222              		.align	2
 1223              		.global	GetLineIndexEdge
 1224              		.code	16
 1225              		.thumb_func
 1227              	GetLineIndexEdge:
 1228              	.LFB9:
 277:../Sources/LineScanCamera.c **** 
 278:../Sources/LineScanCamera.c **** /*
 279:../Sources/LineScanCamera.c **** */
 280:../Sources/LineScanCamera.c **** int GetLineIndexEdge()
 281:../Sources/LineScanCamera.c **** {
 1229              		.loc 1 281 0
 1230              		.cfi_startproc
 1231 0000 B0B5     		push	{r4, r5, r7, lr}
 1232              	.LCFI26:
 1233              		.cfi_def_cfa_offset 16
 1234              		.cfi_offset 4, -16
 1235              		.cfi_offset 5, -12
 1236              		.cfi_offset 7, -8
 1237              		.cfi_offset 14, -4
 1238 0002 84B0     		sub	sp, sp, #16
 1239              	.LCFI27:
 1240              		.cfi_def_cfa_offset 32
 1241 0004 00AF     		add	r7, sp, #0
 1242              	.LCFI28:
 1243              		.cfi_def_cfa_register 7
 282:../Sources/LineScanCamera.c **** 	int position = 0;
 1244              		.loc 1 282 0
 1245 0006 0023     		mov	r3, #0
 1246 0008 FB60     		str	r3, [r7, #12]
 283:../Sources/LineScanCamera.c **** 	int left_edge, right_edge;
 284:../Sources/LineScanCamera.c **** 	int i = 0;
 1247              		.loc 1 284 0
 1248 000a 0023     		mov	r3, #0
 1249 000c BB60     		str	r3, [r7, #8]
 285:../Sources/LineScanCamera.c **** 	
 286:../Sources/LineScanCamera.c **** 	filterData();
 1250              		.loc 1 286 0
 1251 000e FFF7FEFF 		bl	filterData
 287:../Sources/LineScanCamera.c **** 	
 288:../Sources/LineScanCamera.c **** 	// Reset camera ready signal
 289:../Sources/LineScanCamera.c **** 	LineScanImageReady = FALSE;
 1252              		.loc 1 289 0
 1253 0012 384B     		ldr	r3, .L105
 1254 0014 0022     		mov	r2, #0
 1255 0016 1A70     		strb	r2, [r3]
 290:../Sources/LineScanCamera.c **** 	
 291:../Sources/LineScanCamera.c **** 	while(i < 50)
 1256              		.loc 1 291 0
 1257 0018 0BE0     		b	.L90
 1258              	.L92:
 292:../Sources/LineScanCamera.c **** 		if(LineScanData[i++] == 0)
 1259              		.loc 1 292 0
 1260 001a 374B     		ldr	r3, .L105+4
 1261 001c BA68     		ldr	r2, [r7, #8]
 1262 001e 5200     		lsl	r2, r2, #1
 1263 0020 D35A     		ldrh	r3, [r2, r3]
 1264 0022 5A42     		neg	r2, r3
 1265 0024 5341     		adc	r3, r3, r2
 1266 0026 DBB2     		uxtb	r3, r3
 1267 0028 BA68     		ldr	r2, [r7, #8]
 1268 002a 0132     		add	r2, r2, #1
 1269 002c BA60     		str	r2, [r7, #8]
 1270 002e 002B     		cmp	r3, #0
 1271 0030 03D1     		bne	.L103
 1272              	.L90:
 291:../Sources/LineScanCamera.c **** 	while(i < 50)
 1273              		.loc 1 291 0
 1274 0032 BB68     		ldr	r3, [r7, #8]
 1275 0034 312B     		cmp	r3, #49
 1276 0036 F0DD     		ble	.L92
 1277 0038 00E0     		b	.L91
 1278              	.L103:
 293:../Sources/LineScanCamera.c **** 			break;
 1279              		.loc 1 293 0
 1280 003a C046     		mov	r8, r8
 1281              	.L91:
 294:../Sources/LineScanCamera.c **** 	left_edge = i;
 1282              		.loc 1 294 0
 1283 003c BB68     		ldr	r3, [r7, #8]
 1284 003e 7B60     		str	r3, [r7, #4]
 295:../Sources/LineScanCamera.c **** 	i = 99;
 1285              		.loc 1 295 0
 1286 0040 6323     		mov	r3, #99
 1287 0042 BB60     		str	r3, [r7, #8]
 296:../Sources/LineScanCamera.c **** 	while(i > 50)
 1288              		.loc 1 296 0
 1289 0044 0BE0     		b	.L93
 1290              	.L95:
 297:../Sources/LineScanCamera.c **** 		if(LineScanData[i--] == 0)
 1291              		.loc 1 297 0
 1292 0046 2C4B     		ldr	r3, .L105+4
 1293 0048 BA68     		ldr	r2, [r7, #8]
 1294 004a 5200     		lsl	r2, r2, #1
 1295 004c D35A     		ldrh	r3, [r2, r3]
 1296 004e 5A42     		neg	r2, r3
 1297 0050 5341     		adc	r3, r3, r2
 1298 0052 DBB2     		uxtb	r3, r3
 1299 0054 BA68     		ldr	r2, [r7, #8]
 1300 0056 013A     		sub	r2, r2, #1
 1301 0058 BA60     		str	r2, [r7, #8]
 1302 005a 002B     		cmp	r3, #0
 1303 005c 03D1     		bne	.L104
 1304              	.L93:
 296:../Sources/LineScanCamera.c **** 	while(i > 50)
 1305              		.loc 1 296 0
 1306 005e BB68     		ldr	r3, [r7, #8]
 1307 0060 322B     		cmp	r3, #50
 1308 0062 F0DC     		bgt	.L95
 1309 0064 00E0     		b	.L94
 1310              	.L104:
 298:../Sources/LineScanCamera.c **** 			break;
 1311              		.loc 1 298 0
 1312 0066 C046     		mov	r8, r8
 1313              	.L94:
 299:../Sources/LineScanCamera.c **** 	right_edge = (100-i);
 1314              		.loc 1 299 0
 1315 0068 BB68     		ldr	r3, [r7, #8]
 1316 006a 6422     		mov	r2, #100
 1317 006c D31A     		sub	r3, r2, r3
 1318 006e 3B60     		str	r3, [r7]
 300:../Sources/LineScanCamera.c **** 	
 301:../Sources/LineScanCamera.c **** 	//Found finish
 302:../Sources/LineScanCamera.c **** 	if(isFinish())
 1319              		.loc 1 302 0
 1320 0070 FFF7FEFF 		bl	isFinish
 1321 0074 031C     		mov	r3, r0
 1322 0076 002B     		cmp	r3, #0
 1323 0078 02D0     		beq	.L96
 303:../Sources/LineScanCamera.c **** 		position = FINISH;
 1324              		.loc 1 303 0
 1325 007a 9823     		mov	r3, #152
 1326 007c FB60     		str	r3, [r7, #12]
 1327 007e 34E0     		b	.L97
 1328              	.L96:
 304:../Sources/LineScanCamera.c **** 	else
 305:../Sources/LineScanCamera.c **** 		if((left_edge > right_edge) & (left_edge < 50))
 1329              		.loc 1 305 0
 1330 0080 0123     		mov	r3, #1
 1331 0082 7968     		ldr	r1, [r7, #4]
 1332 0084 3A68     		ldr	r2, [r7]
 1333 0086 9142     		cmp	r1, r2
 1334 0088 00DC     		bgt	.L98
 1335 008a 0023     		mov	r3, #0
 1336              	.L98:
 1337 008c D9B2     		uxtb	r1, r3
 1338 008e 7B68     		ldr	r3, [r7, #4]
 1339 0090 3122     		mov	r2, #49
 1340 0092 DC0F     		lsr	r4, r3, #31
 1341 0094 D017     		asr	r0, r2, #31
 1342 0096 251C     		mov	r5, r4
 1343 0098 9A42     		cmp	r2, r3
 1344 009a 4541     		adc	r5, r5, r0
 1345 009c 2B1C     		mov	r3, r5
 1346 009e DBB2     		uxtb	r3, r3
 1347 00a0 0B40     		and	r3, r1
 1348 00a2 DBB2     		uxtb	r3, r3
 1349 00a4 002B     		cmp	r3, #0
 1350 00a6 03D0     		beq	.L99
 306:../Sources/LineScanCamera.c **** 			position = left_edge * 2;
 1351              		.loc 1 306 0
 1352 00a8 7B68     		ldr	r3, [r7, #4]
 1353 00aa 5B00     		lsl	r3, r3, #1
 1354 00ac FB60     		str	r3, [r7, #12]
 1355 00ae 1CE0     		b	.L97
 1356              	.L99:
 307:../Sources/LineScanCamera.c **** 		else if((right_edge > left_edge) & (right_edge < 50))
 1357              		.loc 1 307 0
 1358 00b0 0123     		mov	r3, #1
 1359 00b2 3968     		ldr	r1, [r7]
 1360 00b4 7A68     		ldr	r2, [r7, #4]
 1361 00b6 9142     		cmp	r1, r2
 1362 00b8 00DC     		bgt	.L100
 1363 00ba 0023     		mov	r3, #0
 1364              	.L100:
 1365 00bc D9B2     		uxtb	r1, r3
 1366 00be 3B68     		ldr	r3, [r7]
 1367 00c0 3122     		mov	r2, #49
 1368 00c2 DC0F     		lsr	r4, r3, #31
 1369 00c4 D017     		asr	r0, r2, #31
 1370 00c6 251C     		mov	r5, r4
 1371 00c8 9A42     		cmp	r2, r3
 1372 00ca 4541     		adc	r5, r5, r0
 1373 00cc 2B1C     		mov	r3, r5
 1374 00ce DBB2     		uxtb	r3, r3
 1375 00d0 0B40     		and	r3, r1
 1376 00d2 DBB2     		uxtb	r3, r3
 1377 00d4 002B     		cmp	r3, #0
 1378 00d6 06D0     		beq	.L101
 308:../Sources/LineScanCamera.c **** 			position = -right_edge * 2;
 1379              		.loc 1 308 0
 1380 00d8 3A68     		ldr	r2, [r7]
 1381 00da 131C     		mov	r3, r2
 1382 00dc DB07     		lsl	r3, r3, #31
 1383 00de 9B1A     		sub	r3, r3, r2
 1384 00e0 5B00     		lsl	r3, r3, #1
 1385 00e2 FB60     		str	r3, [r7, #12]
 1386 00e4 01E0     		b	.L97
 1387              	.L101:
 309:../Sources/LineScanCamera.c **** 		else
 310:../Sources/LineScanCamera.c **** 			position = LNF;
 1388              		.loc 1 310 0
 1389 00e6 9723     		mov	r3, #151
 1390 00e8 FB60     		str	r3, [r7, #12]
 1391              	.L97:
 311:../Sources/LineScanCamera.c **** 	return position;
 1392              		.loc 1 311 0
 1393 00ea FB68     		ldr	r3, [r7, #12]
 312:../Sources/LineScanCamera.c **** }
 1394              		.loc 1 312 0
 1395 00ec 181C     		mov	r0, r3
 1396 00ee BD46     		mov	sp, r7
 1397 00f0 04B0     		add	sp, sp, #16
 1398              		@ sp needed for prologue
 1399 00f2 B0BD     		pop	{r4, r5, r7, pc}
 1400              	.L106:
 1401              		.align	2
 1402              	.L105:
 1403 00f4 00000000 		.word	LineScanImageReady
 1404 00f8 00000000 		.word	LineScanData
 1405              		.cfi_endproc
 1406              	.LFE9:
 1408              		.text
 1409              	.Letext0:
 1410              		.file 2 "C:/Freescale/CW MCU v10.5/MCU/ARM_GCC_Support/ewl/EWL_C/include/cstdint"
 1411              		.file 3 "C:/Users/Brent Dimmig/workspace/Freesnail/Project_Headers/MKL25Z4.h"
 1412              		.file 4 "C:/Users/Brent Dimmig/workspace/Freesnail/Project_Headers/Control.h"
 1413              		.file 5 "C:/Users/Brent Dimmig/workspace/Freesnail/Project_Headers/LineScanCamera.h"
 1414              		.file 6 "C:/Users/Brent Dimmig/workspace/Freesnail/Project_Headers/PID.h"
 1415              		.file 7 "C:/Users/Brent Dimmig/workspace/Freesnail/Project_Headers/Accel.h"
DEFINED SYMBOLS
                            *ABS*:00000000 LineScanCamera.c
                            *COM*:00000004 straight_speed
                            *COM*:00000004 medium_speed
                            *COM*:00000004 turn_speed
                            *COM*:00000004 brake_speed
                            *COM*:00000004 speedC
                            *COM*:000000c8 LineScanData
                            *COM*:00001000 histogram
                            *COM*:00000008 kp
                            *COM*:00000008 ki
                            *COM*:00000008 kd
                            *COM*:00000008 lastError
                            *COM*:00000008 llastError
                            *COM*:00000004 lastOutput
                            *COM*:00000006 AccData
                            *COM*:00000002 Xout
                            *COM*:00000002 Yout
                            *COM*:00000002 Zout
                            *COM*:00000001 Xoffset
                            *COM*:00000001 Yoffset
                            *COM*:00000001 Zoffset
                            *COM*:00000004 ramp
                            *COM*:00000004 LineScanImageWorkingBuffer
                            *COM*:00000004 LineScanImage
                            *COM*:00000200 LineScanImageBuffer
                            *COM*:00000001 LineScanWorkingBuffer
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:46     .bss.LineScanImageReady:00000000 LineScanImageReady
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:47     .bss.LineScanImageReady:00000000 $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:49     .text.InitLineScanCamera:00000000 $t
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:54     .text.InitLineScanCamera:00000000 InitLineScanCamera
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:136    .text.InitLineScanCamera:0000006c $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:156    .text.SetLineScanExposureTime:00000000 $t
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:161    .text.SetLineScanExposureTime:00000000 SetLineScanExposureTime
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:218    .text.SetLineScanExposureTime:00000058 $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:227    .text.medianFilter:00000000 $t
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:232    .text.medianFilter:00000000 medianFilter
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:372    .text.medianFilter:000000b8 $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:377    .text.maxValue:00000000 $t
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:382    .text.maxValue:00000000 maxValue
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:441    .text.maxValue:00000040 $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:446    .text.minValue:00000000 $t
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:451    .text.minValue:00000000 minValue
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:511    .text.minValue:00000044 $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:520    .text.stretchFilter:00000000 $t
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:525    .text.stretchFilter:00000000 stretchFilter
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:809    .text.stretchFilter:000001b8 $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:819    .text.isFinish:00000000 $t
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:824    .text.isFinish:00000000 isFinish
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:918    .text.isFinish:00000074 $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:923    .text.filterData:00000000 $t
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:928    .text.filterData:00000000 filterData
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:1063   .text.filterData:000000c0 $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:1069   .text.GetLineIndexCenter:00000000 $t
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:1074   .text.GetLineIndexCenter:00000000 GetLineIndexCenter
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:1216   .text.GetLineIndexCenter:000000b8 $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:1222   .text.GetLineIndexEdge:00000000 $t
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:1227   .text.GetLineIndexEdge:00000000 GetLineIndexEdge
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:1403   .text.GetLineIndexEdge:000000f4 $d
                     .debug_frame:00000010 $d
C:\Users\BRENTD~1\AppData\Local\Temp\cc3lMMCT.s:226    .text.SetLineScanExposureTime:0000006c $t

UNDEFINED SYMBOLS
__aeabi_ui2d
__aeabi_ddiv
__aeabi_dmul
__aeabi_d2f
__aeabi_f2uiz
__aeabi_i2d
__aeabi_dcmpgt
__aeabi_idiv
__aeabi_d2uiz
